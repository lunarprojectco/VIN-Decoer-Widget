private static final int REQUEST_CAMERA_PERMISSION = 200;

private void startVoiceRecognition() {
    // Check for camera permission
    if (ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA)
            != PackageManager.PERMISSION_GRANTED) {
        ActivityCompat.requestPermissions(this,
                new String[]{Manifest.permission.CAMERA},
                REQUEST_CAMERA_PERMISSION);
        return;
    }

    // Create SpeechRecognizer object
    SpeechRecognizer speechRecognizer = SpeechRecognizer.createSpeechRecognizer(this);

    // Set RecognitionListener
    speechRecognizer.setRecognitionListener(new RecognitionListener() {
        // ...
    });

    // Create Intent with ACTION_IMAGE_CAPTURE
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    // Start camera activity
    startActivityForResult(intent, REQUEST_IMAGE_CAPTURE);
}

@Override
public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {
    if (requestCode == REQUEST_CAMERA_PERMISSION) {
        if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
            startVoiceRecognition();
        }
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_IMAGE_CAPTURE && resultCode == RESULT_OK) {
        // Get the image from the intent data
        Bundle extras = data.getExtras();
        Bitmap imageBitmap = (Bitmap) extras.get("data");

        // Do something with the imageBitmap
        // ...
    }
}
